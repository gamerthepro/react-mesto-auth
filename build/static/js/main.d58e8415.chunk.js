(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),o=n(6),i=n.n(o),s=(n(14),n(9)),r=n(2),l=n(7),u=n(8),p=function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))},d=new(function(){function e(t){var n=t.url,a=t.headers;Object(l.a)(this,e),this._url=n,this._headers=a}return Object(u.a)(e,[{key:"getUserInfoServ",value:function(){return fetch("".concat(this._url,"users/me"),{headers:this._headers}).then(p)}},{key:"saveUserInfoServ",value:function(e){return fetch("".concat(this._url,"users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(p)}},{key:"getCardList",value:function(){return fetch("".concat(this._url,"cards"),{headers:this._headers}).then(p)}},{key:"saveNewCard",value:function(e){return fetch("".concat(this._url,"cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(p)}},{key:"removeCard",value:function(e){return fetch("".concat(this._url,"cards/").concat(e),{method:"DELETE",headers:this._headers}).then(p)}},{key:"changeLikeCardStatus",value:function(e,t){return fetch("".concat(this._url,"cards/likes/").concat(e),{method:t?"PUT":"DELETE",headers:this._headers}).then(p)}},{key:"updateAvatar",value:function(e){return fetch("".concat(this._url,"users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(p)}}]),e}())({url:"https://mesto.nomoreparties.co/v1/cohort-20/",headers:{authorization:"4707d041-e92a-46fe-bfe7-19e26cb8b84c","Content-Type":"application/json"}}),j=n(0),m=function(){return Object(j.jsx)("header",{className:"header page__header",children:Object(j.jsx)("img",{className:"logo",src:"data:image/png;base64,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",alt:"\u043b\u043e\u0433\u043e\u0442\u0438\u043f Mesto \u0420\u043e\u0441\u0441\u0438\u0438"})})},h=c.a.createContext(),b=function(e){var t=e.card,n=e.onCardClick,a=e.onCardLike,o=e.onCardDelete,i=c.a.useContext(h),s=t.owner._id===i._id,r="element__delete ".concat(!s&&"element__delete_disable"),l=t.likes.some((function(e){return e._id===i._id})),u="element__like ".concat(l&&"element__like_button_active");return Object(j.jsx)("section",{className:"element-template",children:Object(j.jsxs)("li",{className:"element",children:[Object(j.jsx)("button",{className:r,onClick:function(){o(t._id)},type:"button"}),Object(j.jsx)("img",{className:"element__image",src:t.link,onClick:function(){n({link:t.link,name:t.name})},alt:"\u0424\u043e\u0442\u043e \u0432 \u043b\u0435\u043d\u0442\u0435 mesto"}),Object(j.jsxs)("div",{className:"element__block",children:[Object(j.jsx)("h2",{className:"element__title",children:t.name}),Object(j.jsxs)("div",{className:"element__wrap_like",children:[Object(j.jsx)("button",{className:u,onClick:function(){a(t)},type:"button"}),Object(j.jsx)("div",{className:"element__like_count",children:t.likes.length})]})]})]})})};var _=function(e){var t=Object(a.useContext)(h);return Object(j.jsxs)("main",{className:"content page__content",children:[Object(j.jsx)("section",{className:"profile",children:Object(j.jsxs)("div",{className:"profile__list",children:[Object(j.jsx)("div",{className:"profile__overlay",onClick:e.onEditAvatar,children:Object(j.jsx)("img",{className:"profile__avatar",src:t.avatar,alt:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0444\u0438\u043b\u044f"})}),Object(j.jsxs)("div",{className:"profile__info",children:[Object(j.jsx)("h1",{className:"profile__title",children:t.name}),Object(j.jsx)("button",{className:"profile__button profile__button_open_edit",type:"button",onClick:e.onEditProfile}),Object(j.jsx)("p",{className:"profile__subtitle",children:t.about})]}),Object(j.jsx)("div",{className:"profile__add",children:Object(j.jsx)("button",{className:"profile__button profile__button_open_add",type:"button",onClick:e.onAddPlace})})]})}),Object(j.jsx)("section",{className:"elements",children:Object(j.jsx)("ul",{className:"elements__contener",children:e.cards.map((function(t){return Object(j.jsx)(b,{card:t,onCardClick:e.handleCardClick,onCardLike:e.onCardLike,onCardDelete:e.handleDeleteClick},t._id)}))})})]})};function f(){return Object(j.jsx)("footer",{className:"footer page__footer",children:Object(j.jsxs)("p",{className:"footer__copyright",children:["\xa9 ",(new Date).getFullYear()," Mesto Russia"]})})}var O=function(e){return Object(j.jsx)("div",{className:"popup popup_type_image ".concat(e.card.link&&"popup__open"),children:Object(j.jsxs)("figure",{className:"popup__container popup__container_image",children:[Object(j.jsx)("button",{className:"popup__close popup__close_image",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:e.onClose}),Object(j.jsx)("img",{className:"popup__img",src:e.card.link,alt:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430: ".concat(e.card.name)}),Object(j.jsx)("figcaption",{className:"popup__caption",children:e.card.name})]})})};var v=function(e){return Object(j.jsx)("div",{className:"popup popup_type_".concat(e.name," ").concat(e.isOpen&&"popup__open"),children:Object(j.jsxs)("div",{className:"popup__container",children:[Object(j.jsx)("button",{className:"popup__close popup__close_edit",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:e.onClose}),Object(j.jsx)("h2",{className:"popup__title",children:e.title}),Object(j.jsxs)("form",{className:"popup__form popup__form_".concat(e.name),onSubmit:e.onSubmit,noValidate:!0,children:[e.children,Object(j.jsx)("button",{className:"popup__save",type:"submit",children:e.textBtn})]})]})})};var x=function(e){var t=e.isOpen,n=e.onClose,c=e.onUpdateUser,o=Object(a.useContext)(h),i=Object(a.useState)(""),s=Object(r.a)(i,2),l=s[0],u=s[1],p=Object(a.useState)(""),d=Object(r.a)(p,2),m=d[0],b=d[1];return Object(a.useEffect)((function(){u(o.name),b(o.about)}),[o]),Object(j.jsxs)(v,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",name:"edit",textBtn:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),c({name:l,about:m})},children:[Object(j.jsx)("input",{className:"popup__input popup__input_edit_name",id:"name-input",type:"text",minLength:"2",maxLength:"40",autoComplete:"off",name:"name",placeholder:"\u0418\u043c\u044f",noValidate:!0,required:!0,value:l||"",onChange:function(e){u(e.target.value)}}),Object(j.jsx)("span",{className:"popup__error",id:"name-input-error"}),Object(j.jsx)("input",{className:"popup__input popup__input_edit_job",id:"job-input",type:"text",minLength:"2",maxLength:"200",name:"about",placeholder:"\u041e \u0441\u0435\u0431\u0435",noValidate:!0,required:!0,value:m||"",onChange:function(e){b(e.target.value)}}),Object(j.jsx)("span",{className:"popup__error",id:"job-input-error"})]})};var g=function(e){var t=e.isOpen,n=e.onClose,c=e.onUpdateAvatar,o=Object(a.useRef)();return Object(j.jsxs)(v,{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",name:"avatar",textBtn:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),c({avatar:o.current.value})},children:[Object(j.jsx)("input",{className:"popup__input popup__input_edit_name popup__input_avatar",name:"avatar",type:"url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,id:"url-avatar",autoComplete:"off",defaultValue:"",ref:o}),Object(j.jsx)("span",{className:"popup__error",id:"url-avatar-error"})]})},C=function(e){var t=e.isOpen,n=e.onClose,c=e.onAddPlace,o=Object(a.useState)(""),i=Object(r.a)(o,2),s=i[0],l=i[1],u=Object(a.useState)(""),p=Object(r.a)(u,2),d=p[0],m=p[1];return Object(j.jsxs)(v,{title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",name:"add",textBtn:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),c({name:s,link:d})},children:[Object(j.jsx)("input",{className:"popup__input popup__input_edit_name popup__input_img_name",id:"name-img",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",type:"text",name:"name",minLength:"2",maxLength:"30",noValidate:!0,required:!0,value:s||"",onChange:function(e){l(e.target.value)}}),Object(j.jsx)("span",{className:"popup__error",id:"name-img-error"}),Object(j.jsx)("input",{className:"popup__input popup__input_img_link",id:"img-link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",type:"url",name:"link",noValidate:!0,value:d||"",required:!0,onChange:function(e){m(e.target.value)}}),Object(j.jsx)("span",{className:"popup__error",id:"img-link-error"})]})};var N=function(e){var t=e.isOpen,n=e.onClose,a=e.onCardDelete,c=e.idCard;return Object(j.jsx)(v,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",name:"delete_card",textBtn:"\u0414\u0430",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),a(c)}})};var k=function(){var e=Object(a.useState)({}),t=Object(r.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)([]),i=Object(r.a)(o,2),l=i[0],u=i[1],p=Object(a.useState)(!1),b=Object(r.a)(p,2),v=b[0],k=b[1],A=Object(a.useState)(!1),S=Object(r.a)(A,2),P=S[0],y=S[1],B=Object(a.useState)(!1),L=Object(r.a)(B,2),w=L[0],D=L[1],E=Object(a.useState)(!1),I=Object(r.a)(E,2),U=I[0],F=I[1],T=Object(a.useState)({}),Z=Object(r.a)(T,2),H=Z[0],J=Z[1],M=Object(a.useState)(""),V=Object(r.a)(M,2),K=V[0],Q=V[1],q=function(e){console.error(e)};Object(a.useEffect)((function(){d.getUserInfoServ().then((function(e){c(e)})).catch(q)}),[]),Object(a.useEffect)((function(){d.getCardList().then((function(e){u(e)})).catch(q)}),[]);var R=function(){k(!1),y(!1),D(!1),F(!1),J({}),Q("")};return Object(j.jsx)("div",{className:"page",children:Object(j.jsx)("div",{className:"page__container",children:Object(j.jsxs)(h.Provider,{value:n,children:[Object(j.jsx)(m,{}),Object(j.jsx)(_,{onEditAvatar:function(){k(!0)},onEditProfile:function(){y(!0)},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===n._id}));d.changeLikeCardStatus(e._id,!t).then((function(t){u((function(n){return n.map((function(n){return n._id===e._id?t:n}))}))})).catch(q)},handleDeleteClick:function(e){F(!U),Q(e)},onAddPlace:function(){D(!0)},handleCardClick:function(e){J(e)},cards:l}),Object(j.jsx)(f,{}),Object(j.jsx)(N,{isOpen:U,onClose:R,onCardDelete:function(e){d.removeCard(e).then((function(t){t&&u((function(t){return t.filter((function(t){return t._id!==e}))})),R()})).catch(q)},idCard:K}),Object(j.jsx)(g,{isOpen:v,onClose:R,onUpdateAvatar:function(e){d.updateAvatar(e).then((function(e){c(e),R()})).catch(q)}}),Object(j.jsx)(x,{isOpen:P,onClose:R,onUpdateUser:function(e){d.saveUserInfoServ(e).then((function(e){c(e),R()})).catch(q)}}),Object(j.jsx)(C,{isOpen:w,onClose:R,onAddPlace:function(e){d.saveNewCard(e).then((function(e){u([e].concat(Object(s.a)(l))),R()})).catch(q)}}),Object(j.jsx)(O,{card:H,onClose:R})]})})})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),o(e),i(e)}))};i.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(k,{})}),document.getElementById("root")),A()}},[[16,1,2]]]);
//# sourceMappingURL=main.d58e8415.chunk.js.map